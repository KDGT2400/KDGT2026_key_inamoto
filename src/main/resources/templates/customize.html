<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>レイアウトカスタマイズ</title>
<link rel="stylesheet" href="/css/customize.css">
</head>
<body>

<h2>ドラッグで移動できます</h2>

<div id="calendarPanel" class="panel">
  カレンダーエリア
</div>
<form th:action="@{/customize/save}" method="post">
  <input type="hidden"
         th:name="${_csrf.parameterName}"
         th:value="${_csrf.token}" />

  <!-- JSON保存用 -->
  <input type="hidden" name="layoutJson" id="layoutJson">

  <!-- 表示設定 -->
  <label>背景色</label><br>
  <input type="color" name="backgroundColor"
         th:value="${user.backgroundColor}"><br><br>

  <label>文字色</label><br>
  <input type="color" name="textColor"
         th:value="${user.textColor}"><br><br>

  <label>文字サイズ</label><br>
  <select name="fontSize">
    <option value="12px">小</option>
    <option value="14px">中</option>
    <option value="16px">大</option>
  </select><br><br>

  <button type="submit">保存</button>
</form>



</script>
<script th:inline="javascript">
  const savedLayout = /*[[${layoutJson}]]*/ "{}";
</script>

<script src="/js/drag.js"></script>
</body>
</html>

<script th:inline="javascript">
  const layout = JSON.parse(/*[[${layoutJson}]]*/ "{}");

  const panel = document.getElementById("calendarPanel");

  if (layout.calendar) {
    panel.style.left = layout.calendar.x + "px";
    panel.style.top = layout.calendar.y + "px";
    panel.style.width = layout.calendar.width + "px";
    panel.style.height = layout.calendar.height + "px";
    panel.style.opacity = layout.calendar.opacity;
  }
</script>

